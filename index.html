<html>
	<head>
		<title>Magazzino del Sole</title>		
		<link href="css/style.css" rel="stylesheet" type="text/css">
		<link href="css/svg-style.css" rel="stylesheet" type="text/css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular.js"></script>
		<script type="text/javascript" src="script/ui-bootstrap-tpls-0.13.3.js"></script>
		<script type="text/javascript" src="lib/Chart.min.js"></script>
		<script src="script/script.js"></script>
		<script src="script/controllers/representation.js"></script>
	</headh>
	<body ng-app="mds">
		<h1><img src="images/logo.gif" alt="Magazzino del Sole"></img></h1>
		<div class="container">
			<h2>Dati statistici - Beta</h2>
			<p>Per ulteriori informazioni visita <a href="http://www.magazzinodelsole.com/">magazzinodelsole.com</a></p>
			<p>Seleziona una data:</p>
			<p>
				<input style="width: 30%;" id="dataPicker" type="date" ng-required="true" class="form-control" datepicker-popup ng-model="selectedDate" close-text="Close"/>
				<button id="openButton" type="button" class="btn btn-primary" ng-click="loadData(selectedDate)">Carica dati</button>
			</p>
			</br>
			<!-- Pannello della tabella-->
			<div class="col-ms-12" ng-controller="tableController" ng-if="data">
				<div class="panel panel-default" id="tablePanel">
					<div class="panel-heading clearfix">
						<div class="btn-group pull-right">
							<button ng-show="showTable" type="button" class="btn btn-primary" ng-model="showAdvanced" btn-checkbox btn-checkbox-true="true" btn-checkbox-false="false">Dati avanzati</button>
							<button type="button" class="btn btn-primary" ng-model="showTable" btn-checkbox btn-checkbox-true="true" btn-checkbox-false="false">Tabella</button>
					    </div>
						<h3 class="panel-title"><strong>Tabella Completa</strong></h3>
					</div>	
					<!--La tabella non è all'interno del panel-noby, perchè cosi fa parte del pannello-->
					<div class="res-table" id="tableBodyPanel" ng-show="showTable">
		        		<table id="tab" class="table table-striped">
		        			<thead>
		        				<tr>
		        					<th ng-repeat="title in titles track by $index" ng-show="$index < advanceIndex || showAdvanced" ng-bind="title"></th>
		        				</tr>
		        			</thead>
		        			<tbody>
		        				<tr ng-repeat="instant in data track by $index">
		        					<th ng-bind="instant.time"></th>
		        					<th ng-repeat="sensor in instant.sensors track by $index" ng-bind="sensor"></th>
			        				<th ng-bind="instant.inH2O" ng-if="showAdvanced"></th>
			        				<th ng-bind="instant.outH2O" ng-if="showAdvanced"></th>
			        				<th ng-bind="instant.inSun" ng-if="showAdvanced"></th>
			        				<th ng-bind="instant.outSun" ng-if="showAdvanced"></th>
			        				<th ng-bind="instant.pilotPanel" ng-if="showAdvanced"></th>
			        				<th ng-bind="instant.air" ng-if="showAdvanced"></th>
		        				</tr>
		        			</tbody>
		        		</table>
		        	</div>
		        </div>
		    </div>
		    <!-- Fine tabella -->
		    <!-- Pannello delle simulazioni -->
		    <div class="col-ms-12" ng-if="data" ng-controller="simulationController">
		        <div class="panel panel-default" id="simulationPanel">
		        	<div class="panel-heading clearfix">
						<div class="btn-group pull-right">
							<button type="button" class="btn btn-primary" ng-model="showSimulation" ng-init="showSimulation = true" btn-checkbox btn-checkbox-true="true" btn-checkbox-false="false">Rappresentazione</button>
					    </div>
						<h3 class="panel-title"><strong>Simulazione</strong></h3>
					</div>	
		        	<div class="panel-body" ng-if="showSimulation">
		        		<rappresentation instant-values="data[step]"></rappresentation>
		        		<!-- <my-svg instant-values="data[step]"></my-svg> -->
		        		<h2>Ora: {{data[step].time}}</h2><h2 id="simulationTime">
			        </div>
			        <ul class="list-group" ng-if="showSimulation">
			        	<li class="list-group-item">
			        		<ul class="list-inline">
			        			<li>Simulazione:</li>
			        			<div class="btn-group">
				        			<button class="btn btn-default" ng-click="play()">&#9658</button>
				        			<button class="btn btn-default" ng-click="pause()"> &#9646&#9646</button>
				        			<button class="btn btn-default" ng-click="stop()">&#9724</button>
				        		</div>
			        			<li><input class="bar" style="width: 500px;" type="range" min="0" max="{{steps - 1}}" ng-model="step" ng-init="step = 0"/></li>
			        		</ul>
                        </li>
					</ul>
		        </div>		        
		    </div>
		    <!-- Fine pannello delle simulazioni -->
		    <!-- Inizio pannello del grafico -->
	        <div class="col-ms-12" ng-if="data">
		        <div class="panel panel-default" id="chartPanel">
		        	<div class="panel-heading clearfix">
		        		<div class="btn-group pull-right">				        
					        <button class="btn btn-danger btn-xs" id="hideChartBtn">Nascondi Grafico</button>
					    </div>
		        		<h3 class="panel-title"><strong>Grafico (beta)</strong></h3>
		        	</div>
		        	<div class="panel-body" id="chartBodyPanel">
		        		<canvas id="chartCanvas" width="300" height="200"></canvas>
						<div id="slider">
							<input class="bar" type="range" id="timeChartRange" value="50"/>
							<p id="timeChartP">Ora visualizzata:</p>
						</div>
		        	</div>
		        </div>
		    </div>
		    <!-- Fine pannello del grafico -->
		    <!--Inizio pannello dei dati riassuntivi -->
		    <div class="col-ms-12" ng-if="data">
		        <div class="panel panel-default" id="summaryPanel">
		        	<div class="panel-heading">
		        		<h3 class="panel-title"><strong>Dati Riassuntivi</strong></h3>
		        	</div>
		        	<ul class="list-group">
		        	<li class="list-group-item">Temperatura Massima</li>
		        	<li class="list-group-item">Temperatura Minima</li>
		        	<li class="list-group-item">Temperatura Media</li>
		        	</ul>
		        </div>
		    </div>
		    <!-- Fine del pannello dei dati riassuntivi -->
	    </div>
	</body>
</html>